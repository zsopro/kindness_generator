<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NEO Preview</title>
    <style>
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; background: #000; overflow: hidden; font-family: sans-serif; }
        
        #main-container { position: relative; width: 100vw; height: 100vh; }

        /* Univerzális konténerek */
        .element-container { position: absolute; transform: translate(-50%, -50%); transition: none; pointer-events: none; }
        
        #video-container { z-index: 1; }
        #deco1-container, #deco2-container { z-index: 2; }
        
        iframe, img { width: 100%; height: 100%; display: block; border: none; }

        /* Szerkesztő segédvonalak (csak ha edit=1) */
        .edit-mode .element-container { outline: 1px dashed rgba(0, 255, 0, 0.5); }
    </style>
</head>
<body>

    <div id="main-container">
        <div id="video-container" class="element-container">
            <div id="player"></div>
        </div>
        <div id="deco1-container" class="element-container"><img id="d1-img" src="" style="display:none;"></div>
        <div id="deco2-container" class="element-container"><img id="d2-img" src="" style="display:none;"></div>
    </div>

    <script>
        let player;
        const params = new URLSearchParams(window.location.search);

        // YouTube API betöltése
        const tag = document.createElement('script');
        tag.src = "https://www.youtube.com/iframe_api";
        const firstScriptTag = document.getElementsByTagName('script')[0];
        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

        function onYouTubeIframeAPIReady() {
            const videoId = params.get('yt');
            if (!videoId) return;

            player = new YT.Player('player', {
                height: '100%',
                width: '100%',
                videoId: videoId,
                playerVars: {
                    'autoplay': 1,
                    'controls': 0,
                    'mute': 1,
                    'loop': 1,
                    'playlist': videoId
                },
                events: {
                    'onReady': onPlayerReady
                }
            });
        }

        function onPlayerReady(event) {
            applyAllStyles(Object.fromEntries(params));
            if (params.get('edit') === '1') document.body.classList.add('edit-mode');
        }

        // Stílusok alkalmazása az orientáció alapján (Álló vs Fekvő)
        function applyAllStyles(p) {
            const isLand = window.innerWidth > window.innerHeight
