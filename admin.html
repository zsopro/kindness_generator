<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <title>NEO Admin - Link Gener√°tor</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #121212; color: white; display: flex; height: 100vh; margin: 0; overflow: hidden; }
        .panel { width: 400px; background: #1e1e1e; padding: 20px; overflow-y: auto; border-right: 2px solid #333; box-shadow: 5px 0 15px rgba(0,0,0,0.5); z-index: 20; }
        .preview { flex: 1; background: #000; position: relative; z-index: 10; }
        iframe { width: 100%; height: 100%; border: none; }
        h2 { color: #00ff00; margin-bottom: 20px; border-bottom: 1px solid #333; padding-bottom: 10px; font-size: 1.5rem; }
        label { display: block; margin-top: 15px; color: #aaa; font-size: 0.75rem; text-transform: uppercase; letter-spacing: 1px; }
        input, select { width: 100%; padding: 10px; margin-top: 5px; background: #2d2d2d; border: 1px solid #444; color: white; border-radius: 4px; outline: none; }
        input:focus { border-color: #00ff00; }
        input[type="range"] { padding: 0; accent-color: #00ff00; cursor: pointer; }
        .deco-box { background: #252525; padding: 15px; border-radius: 5px; margin-top: 15px; border-left: 3px solid #00ff00; }
        button { width: 100%; padding: 15px; background: #00ff00; color: black; border: none; font-weight: bold; margin-top: 25px; cursor: pointer; border-radius: 5px; text-transform: uppercase; transition: 0.3s; }
        button:hover { background: #00cc00; transform: translateY(-2px); }
        #url-output { font-size: 0.7rem; background: #000; padding: 10px; margin-top: 15px; word-break: break-all; color: #00ff00; border: 1px dashed #00ff00; min-height: 40px; }
    </style>
</head>
<body>

<div class="panel">
    <h2>üõ† BE√ÅLL√çT√ÅSOK</h2>
    
    <label>F≈ëc√≠m</label>
    <input type="text" id="cim" value="SZERETLEK!" oninput="delayedUpdate()">

    <label>Alc√≠m</label>
    <input type="text" id="alcim" value="Mindenn√©l jobban" oninput="delayedUpdate()">

    <label>YouTube Link</label>
    <input type="text" id="zene_url" placeholder="URL m√°sol√°sa ide..." oninput="delayedUpdate()">

    <label>M√≥d</label>
    <select id="mode" onchange="delayedUpdate()">
        <option value="zene">Csak zene</option>
        <option value="video">Vide√≥ lej√°tsz√≥</option>
        <option value="bgvideo">H√°tt√©r vide√≥</option>
    </select>

    <label>Effekt</label>
    <select id="effect" onchange="delayedUpdate()">
        <option value="heart">Sz√≠vek</option>
        <option value="flower">Vir√°gok</option>
        <option value="snow">H√≥ / Pontok</option>
    </select>

    <label>Intenzit√°s</label>
    <input type="range" id="intens" min="1" max="40" value="10" oninput="delayedUpdate()">

    <label>M√©ret</label>
    <input type="range" id="size" min="5" max="100" value="30" oninput="delayedUpdate()">

    <div class="deco-box">
        <strong>üñº DEKOR√ÅCI√ì</strong>
        <label>K√©p Link (HTTPS)</label>
        <input type="text" id="d1url" placeholder="https://..." oninput="delayedUpdate()">
        <label>X-Y Poz√≠ci√≥</label>
        <input type="range" id="d1x" min="0" max="100" value="50" oninput="delayedUpdate()">
        <input type="range" id="d1y" min="0" max="100" value="80" oninput="delayedUpdate()">
        <label>K√©p m√©rete</label>
        <input type="range" id="d1s" min="20" max="500" value="150" oninput="delayedUpdate()">
    </div>

    <button onclick="copy()">LINK M√ÅSOL√ÅSA</button>
    <div id="url-output"></div>
</div>

<div class="preview">
    <iframe id="preview-frame" src="index.html"></iframe>
</div>

<script>
    let timer;
    function getYoutubeID(url) {
        if(!url) return "";
        const regExp = /^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/;
        const match = url.match(regExp);
        return (match && match[2].length === 11) ? match[2] : url;
    }

    // K√©sleltetett friss√≠t√©s, hogy ne fagyjon le g√©pel√©s k√∂zben
    function delayedUpdate() {
        clearTimeout(timer);
        timer = setTimeout(update, 500);
    }

    function update() {
        // Megkeress√ºk az index.html √∫tvonal√°t
        const currentPath = window.location.pathname;
        const basePath = currentPath.substring(0, currentPath.lastIndexOf('/') + 1);
        const url = new URL("index.html", window.location.origin + basePath);
        
        const params = {
            cim: document.getElementById('cim').value,
            alcim: document.getElementById('alcim').value,
            mode: document.getElementById('mode').value,
            effect: document.getElementById('effect').value,
            intens: document.getElementById('intens').value,
            size: document.getElementById('size').value,
            zene: getYoutubeID(document.getElementById('zene_url').value)
        };

        const dUrl = document.getElementById('d1url').value;
        if(dUrl) {
            params.d1url = dUrl;
            params.d1x = document.getElementById('d1x').value;
            params.d1y = document.getElementById('d1y').value;
            params.d1s = document.getElementById('d1s').value;
        }

        Object.keys(params).forEach(key => url.searchParams.append(key, params[key]));

        const finalUrl = url.toString();
        document.getElementById('url-output').innerText = finalUrl;
        document.getElementById('preview-frame').src = finalUrl;
    }

    function copy() {
        const text = document.getElementById('url-output').innerText;
        navigator.clipboard.writeText(text).then(() => {
            const btn = document.querySelector('button');
            const originalText = btn.innerText;
            btn.innerText = "M√ÅSOLVA!";
            btn.style.background = "#fff";
            setTimeout(() => { btn.innerText = originalText; btn.style.background = "#00ff00"; }, 2000);
        });
    }

    // Els≈ë ind√≠t√°s
    setTimeout(update, 1000);
</script>

</body>
</html>
