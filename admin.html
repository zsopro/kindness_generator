<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <title>NEO ADMIN - WORKSTATION</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron&family=Dancing+Script&family=Pacifico&family=Bebas+Neue&family=Great+Vibes&family=Monoton&family=Press+Start+2P&family=Rajdhani&family=Satisfy&family=Comfortaa&family=Righteous&family=Cinzel&family=Lobster&family=Kaushan+Script&family=Permanent+Marker&family=Exo+2&family=Abril+Fatface&family=Unbounded&family=Special+Elite&family=Russo+One&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #0a0a0a; color: white; display: flex; height: 100vh; margin: 0; overflow: hidden; }
        
        /* 3-Panel Elrendez√©s */
        .settings-panel { width: 400px; background: #181818; padding: 15px; overflow-y: auto; border-right: 2px solid #333; }
        .preview-panel { flex: 1; background: #000; display: flex; align-items: center; justify-content: center; position: relative; }
        .templates-panel { width: 300px; background: #181818; padding: 15px; border-left: 2px solid #333; overflow-y: auto; }

        iframe { width: 340px; height: 600px; border: 12px solid #222; border-radius: 35px; background: #000; box-shadow: 0 0 50px rgba(0,255,0,0.1); }
        
        .section { background: #222; padding: 12px; border-radius: 8px; margin-bottom: 12px; border-left: 4px solid #0f0; }
        h4 { margin: 0 0 10px 0; font-size: 0.8rem; letter-spacing: 1px; color: #0f0; text-transform: uppercase; }
        label { font-size: 0.6rem; color: #aaa; display: block; margin-top: 5px; }
        input, select { width: 100%; padding: 8px; background: #333; color: #fff; border: 1px solid #444; border-radius: 4px; margin-top: 3px; }
        .row { display: flex; gap: 10px; } .row > div { flex: 1; }
        .num { text-align: center; color: #0f0; font-weight: bold; }

        /* Sablon K√°rty√°k */
        .template-item { background: #2a2a2a; border: 1px solid #444; padding: 10px; border-radius: 5px; margin-bottom: 10px; transition: 0.2s; cursor: pointer; }
        .template-item:hover { border-color: #0f0; background: #333; }
        .template-item h5 { margin: 0; color: #fff; font-size: 0.9rem; }
        .template-item span { font-size: 0.7rem; color: #888; }

        button { width: 100%; padding: 12px; border: none; border-radius: 5px; font-weight: bold; cursor: pointer; text-transform: uppercase; }
        .btn-green { background: #0f0; color: #000; }
        .btn-blue { background: #007bff; color: #fff; margin-top: 5px; }
        #json-out { width: 100%; height: 80px; font-size: 10px; background: #000; color: #0f0; display: none; margin-top: 10px; border: 1px dashed #0f0; }
    </style>
</head>
<body>

    <div class="settings-panel">
        <h4>üõ† Be√°ll√≠t√°sok</h4>
        
        <div class="section">
            <label>Ind√≠t√≥ gomb felirata</label>
            <input type="text" id="btn" value="START" oninput="update()">
        </div>

        <div class="section">
            <label>C√≠m (N√©v / √úzenet)</label>
            <input type="text" id="cim" value="NEO PROJECT" oninput="update()">
            <div class="row">
                <div><label>Bet≈±</label><select id="mf" onchange="update()"></select></div>
                <div><label>Sz√≠n</label><input type="color" id="mc" value="#00ff00" oninput="update()"></div>
            </div>
            <div class="row">
                <div><label>S%</label><input type="number" id="ms" value="5" oninput="update()" class="num"></div>
                <div><label>X%</label><input type="number" id="mx" value="50" oninput="update()" class="num"></div>
                <div><label>Y%</label><input type="number" id="my" value="40" oninput="update()" class="num"></div>
            </div>
        </div>

        <div class="section" style="border-left-color: #0df;">
            <label>Alc√≠m (Titulus / D√°tum)</label>
            <input type="text" id="alcim" value="Workstation Mode" oninput="update()">
            <div class="row">
                <div><label>Bet≈±</label><select id="sf" onchange="update()"></select></div>
                <div><label>S%</label><input type="number" id="ss" value="2" oninput="update()" class="num"></div>
            </div>
        </div>

        <div class="section" style="border-left-color: #f0f;">
            <label>Effekt T√≠pusa</label>
            <select id="eff" onchange="update()">
                <option value="none">Nincs</option>
                <option value="heart">Sz√≠v</option>
                <option value="snow">H√≥</option>
                <option value="flower">Vir√°g</option>
                <option value="bday">üéâ Konfetti</option>
                <option value="custom">üñº EGYEDI K√âP</option>
            </select>
            <label>Egyedi Effekt K√©p URL</label>
            <input type="text" id="eff_url" placeholder="https://...png" oninput="update()">
            <div class="row">
                <div><label>Sz√≠n (ha nem k√©p)</label><input type="color" id="ec" value="#ffffff" oninput="update()"></div>
                <div><label>S≈±r≈±s√©g</label><input type="number" id="intens" value="8" oninput="update()" class="num"></div>
            </div>
        </div>

        <div class="section" style="border-left-color: #ff0;">
            <label>YouTube ID / Link</label>
            <input type="text" id="yt" value="YgQPz42mUH0" oninput="update()">
            <div class="row">
                <div><label>W%</label><input type="number" id="vw" value="100" oninput="update()" class="num"></div>
                <div><label>H%</label><input type="number" id="vh" value="100" oninput="update()" class="num"></div>
                <div style="text-align:center"><label>Mute</label><input type="checkbox" id="mute" onchange="update()" style="width:20px;"></div>
            </div>
        </div>

        <div class="section" style="border-left-color: #fff;">
            <label>K√©p 1 (Log√≥/Profil) URL</label>
            <input type="text" id="d1url" oninput="update()">
            <div class="row">
                <div><label>X%</label><input type="number" id="d1x" value="20" oninput="update()" class="num"></div>
                <div><label>S%</label><input type="number" id="d1s" value="15" oninput="update()" class="num"></div>
                <div><label>R%</label><input type="number" id="d1r" value="0" oninput="update()" class="num"></div>
            </div>
            <label>K√©p 2 URL</label>
            <input type="text" id="d2url" oninput="update()">
        </div>

        <button class="btn-green" onclick="copyLink()">Link M√°sol√°sa</button>
        <button class="btn-blue" onclick="exportTemplate()">Ment√©s Sablonk√©nt</button>
        <textarea id="json-out" readonly></textarea>
    </div>

    <div class="preview-panel">
        <iframe id="ifr" src="index.html"></iframe>
    </div>

    <div class="templates-panel">
        <h4>üìÅ Sablonok</h4>
        <label>F≈ëkateg√≥ria</label>
        <select id="main-cat" onchange="updateSubCats()"></select>
        <label>Alkateg√≥ria</label>
        <select id="sub-cat" onchange="renderTemplates()"></select>
        
        <div id="template-list" style="margin-top: 20px;">
            </div>
    </div>

<script>
    const fonts = ["Orbitron", "Dancing Script", "Pacifico", "Bebas Neue", "Great Vibes", "Monoton", "Press Start 2P", "Rajdhani", "Satisfy", "Comfortaa", "Righteous", "Cinzel", "Lobster", "Kaushan Script", "Permanent Marker", "Exo 2", "Abril Fatface", "Unbounded", "Special Elite", "Russo One"];
    const inputIds = ['btn','cim','mc','ms','mf','mx','my','alcim','ss','sf','sx','sy','eff','eff_url','ec','intens','yt','vw','vh','mute','d1url','d1x','d1s','d1r','d2url','d2x','d2s','d2r'];
    let catData = {}, templates = [];

    async function init() {
        ['mf','sf'].forEach(id => {
            const s = document.getElementById(id);
            fonts.forEach(f => { let o = document.createElement('option'); o.value=f; o.innerText=f; o.style.fontFamily=f; s.appendChild(o); });
        });

        // Kateg√≥ri√°k bet√∂lt√©se
        try {
            const cRes = await fetch('categories.json');
            catData = (await cRes.json()).categories;
            const mCat = document.getElementById('main-cat');
            Object.keys(catData).forEach(k => { mCat.add(new Option(k, k)); });
            updateSubCats();
        } catch(e) { console.error("F√°jl hiba (categories.json)"); }

        // Sablonok bet√∂lt√©se
        try {
            const tRes = await fetch('templates.json');
            templates = (await tRes.json()).templates;
            renderTemplates();
        } catch(e) {}
        
        update();
    }

    function updateSubCats() {
        const main = document.getElementById('main-cat').value;
        const sub = document.getElementById('sub-cat');
        sub.innerHTML = "";
        catData[main].forEach(s => { sub.add(new Option(s, s)); });
        renderTemplates();
    }

    function renderTemplates() {
        const sub = document.getElementById('sub-cat').value;
        const list = document.getElementById('template-list');
        list.innerHTML = "";
        templates.filter(t => t.subCategory === sub).forEach(t => {
            const d = document.createElement('div');
            d.className = 'template-item';
            d.onclick = () => loadT(t.params);
            d.innerHTML = `<h5>${t.name}</h5><span>Param√©terek bet√∂lt√©se...</span>`;
            list.appendChild(d);
        });
    }

    function loadT(pStr) {
        const p = new URLSearchParams(pStr);
        p.forEach((v, k) => {
            const el = document.getElementById(k==='effect'?'eff':k);
            if(el) { if(el.type==='checkbox') el.checked = v==='1'; else el.value=v; }
        });
        update();
    }

    function exportTemplate() {
        const name = prompt("Sablon neve?");
        if(!name) return;
        const p = new URLSearchParams();
        inputIds.forEach(id => {
            const el = document.getElementById(id);
            p.set(id==='eff'?'effect':id, el.type==='checkbox' ? (el.checked?'1':'0') : el.value.replace('#',''));
        });
        const newT = { name, subCategory: document.getElementById('sub-cat').value, params: p.toString() };
        templates.push(newT);
        const out = document.getElementById('json-out');
        out.style.display = 'block';
        out.value = JSON.stringify({templates}, null, 2);
        renderTemplates();
        alert("JSON friss√≠tve! M√°sold be a templates.json f√°jlba.");
    }

    function update() {
        const p = new URLSearchParams();
        inputIds.forEach(id => {
            const el = document.getElementById(id);
            if(!el) return;
            p.set(id==='eff'?'effect':id, el.type==='checkbox' ? (el.checked?'1':'0') : el.value.replace('#',''));
        });
        document.getElementById('ifr').src = 'index.html?' + p.toString();
    }

    function getYTId(v) {
        let m = v.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/);
        return (m && m[2].length===11) ? m[2] : v;
    }

    function copyLink() {
        const url = window.location.href.split('admin.html')[0] + document.getElementById('ifr').getAttribute('src');
        navigator.clipboard.writeText(url);
        alert("K√©sz link m√°solva!");
    }

    window.onload = init;
</script>
</body>
</html>
