<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <title>Link Gener√°tor Pro Admin</title>
    <style>
        body { font-family: sans-serif; background: #1a1a1a; color: white; display: flex; flex-wrap: wrap; padding: 20px; gap: 20px; }
        .panel { background: #2a2a2a; padding: 20px; border-radius: 10px; width: 450px; border: 1px solid #444; }
        .preview-box { flex: 1; min-width: 350px; height: 600px; border: 4px solid #444; border-radius: 10px; position: sticky; top: 20px; }
        iframe { width: 100%; height: 100%; border: none; }
        label { display: block; margin-top: 15px; font-size: 0.9rem; color: #00ff00; }
        input[type="text"], select, textarea { width: 100%; padding: 8px; margin-top: 5px; background: #333; border: 1px solid #555; color: white; }
        input[type="range"] { width: 100%; accent-color: #00ff00; }
        .deco-group { border: 1px solid #444; padding: 10px; margin-top: 10px; border-radius: 5px; }
        button { width: 100%; padding: 15px; margin-top: 20px; background: #00ff00; border: none; font-weight: bold; cursor: pointer; }
        .url-res { font-size: 0.7rem; background: #000; padding: 10px; margin-top: 10px; word-break: break-all; }
    </style>
</head>
<body>

<div class="panel">
    <h2>‚öôÔ∏è Be√°ll√≠t√°sok</h2>
    
    <label>Sablon</label>
    <select id="preset" onchange="update()">
        <option value="">Egyedi</option>
        <option value="valentin">Valentin</option>
        <option value="anyakhnapja">Any√°k napja</option>
        <option value="karacsony">Kar√°csony</option>
    </select>

    <label>YouTube Link (teljes URL-t m√°solhatsz)</label>
    <input type="text" id="zene_url" placeholder="https://www.youtube.com/watch?v=..." oninput="update()">

    <label>F≈ëc√≠m</label>
    <input type="text" id="cim" value="SZERETLEK!" oninput="update()">

    <label>Effekt intenzit√°s</label>
    <input type="range" id="intens" min="1" max="20" value="5" oninput="update()">
    
    <label>Effekt m√©ret</label>
    <input type="range" id="size" min="10" max="100" value="20" oninput="update()">

    <div class="deco-group">
        <strong>üñº Dekor√°ci√≥ 1</strong>
        <input type="text" id="d1url" placeholder="K√©p URL" oninput="update()">
        <label>V√≠zszintes (X)</label><input type="range" id="d1x" min="0" max="100" value="20" oninput="update()">
        <label>F√ºgg≈ëleges (Y)</label><input type="range" id="d1y" min="0" max="100" value="80" oninput="update()">
        <label>M√©ret</label><input type="range" id="d1s" min="20" max="300" value="100" oninput="update()">
    </div>

    <div class="deco-group">
        <strong>üñº Dekor√°ci√≥ 2</strong>
        <input type="text" id="d2url" placeholder="K√©p URL" oninput="update()">
        <label>V√≠zszintes (X)</label><input type="range" id="d2x" min="0" max="100" value="80" oninput="update()">
        <label>F√ºgg≈ëleges (Y)</label><input type="range" id="d2y" min="0" max="100" value="80" oninput="update()">
        <label>M√©ret</label><input type="range" id="d2s" min="20" max="300" value="100" oninput="update()">
    </div>

    <button onclick="copyURL()">LINK M√ÅSOL√ÅSA</button>
    <div class="url-res" id="finalURL"></div>
</div>

<div class="preview-box">
    <iframe id="preview"></iframe>
</div>

<script>
    function extractYoutubeId(url) {
        const regExp = /^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/;
        const match = url.match(regExp);
        return (match && match[2].length === 11) ? match[2] : url;
    }

    function update() {
        const baseUrl = window.location.href.replace('admin.html', 'index.html');
        const params = new URLSearchParams();

        params.set('cim', document.getElementById('cim').value);
        params.set('intens', document.getElementById('intens').value);
        params.set('size', document.getElementById('size').value);
        
        const ytId = extractYoutubeId(document.getElementById('zene_url').value);
        if(ytId) params.set('zene', ytId);

        if(document.getElementById('preset').value) params.set('preset', document.getElementById('preset').value);

        for(let i=1; i<=2; i++) {
            let url = document.getElementById('d'+i+'url').value;
            if(url) {
                params.set('d'+i+'url', url);
                params.set('d'+i+'x', document.getElementById('d'+i+'x').value);
                params.set('d'+i+'y', document.getElementById('d'+i+'y').value);
                params.set('d'+i+'s', document.getElementById('d'+i+'s').value);
            }
        }

        const final = baseUrl + '?' + params.toString();
        document.getElementById('finalURL').innerText = final;
        document.getElementById('preview').src = final;
    }

    function copyURL() {
        navigator.clipboard.writeText(document.getElementById('finalURL').innerText);
        alert("M√°solva!");
    }
    update();
</script>
</body>
</html>
